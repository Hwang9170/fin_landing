<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>금융 동화 | AI 기반 금융 리터러시</title>
  <meta name="description" content="어려운 금융 개념을 동화·일러스트·음성으로 쉽게 전달하는 AI 서비스" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #0b1020;
      --panel: #121730;
      --muted: #8fa1c7;
      --text: #eef1ff;
      --brand: #6ea8ff;
      --brand-2: #a5f3fc;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 16px;
    }
    html, body { height: 100%; }
    body{
      margin:0; font-family: 'Pretendard','Apple SD Gothic Neo',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,
      'Noto Sans KR','Noto Color Emoji',sans-serif;
      background:
        radial-gradient(60% 40% at 20% 0%, rgba(110,168,255,.15), transparent 60%),
        radial-gradient(50% 30% at 80% 10%, rgba(165,243,252,.12), transparent 70%),
        linear-gradient(180deg, #0a0f1e 0%, #0f1630 100%);
      color:var(--text);
      line-height:1.6;
    }
    a{ color:inherit; text-decoration:none }
    .container{ width:min(1200px, 92%); margin-inline:auto }
    header{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(10,15,30,.9), rgba(10,15,30,.4));
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .nav{ display:flex; align-items:center; justify-content:space-between; padding:14px 0 }
    .brand{ display:flex; align-items:center; gap:12px; font-weight:800; letter-spacing:.3px }
    .logo{ width:32px; height:32px; border-radius:8px; background:linear-gradient(135deg, var(--brand), var(--brand-2)); box-shadow: var(--shadow) }
    .nav ul{ display:flex; gap:18px; list-style:none; padding:0; margin:0 }
    .nav a{ padding:8px 12px; border-radius:10px; color:var(--muted) }
    .nav a:hover,.nav a.active{ color:var(--text); background:rgba(255,255,255,.06) }

    .hero{ display:grid; grid-template-columns: 1.25fr 1fr; gap:40px; align-items:center; padding:64px 0 40px }
    .badge{ display:inline-flex; gap:8px; align-items:center; padding:6px 10px; border-radius:999px; background:rgba(110,168,255,.12); color:var(--brand); font-weight:700; font-size:12px; letter-spacing:.3px }
    .title{ font-size: clamp(28px, 5vw, 56px); line-height:1.1; margin:12px 0 12px; font-weight:800 }
    .subtitle{ color:var(--muted); font-size: clamp(14px, 2.2vw, 18px) }
    .cta{ display:flex; gap:12px; margin-top:24px }
    .btn{ padding:12px 16px; border-radius:12px; border:1px solid rgba(255,255,255,.08); background:#192246; color:var(--text); font-weight:700; box-shadow: var(--shadow); cursor:pointer }
    .btn.primary{ background: linear-gradient(135deg, var(--brand), #7cc5ff); color:#061225 }
    .btn.ghost{ background:transparent }
    .hero-card{
      background:linear-gradient(180deg,#11193a,#0e1533); border:1px solid rgba(255,255,255,.06); border-radius:20px; padding:18px; box-shadow: var(--shadow);
    }
    .hero-grid{ display:grid; grid-template-columns: 1fr 1fr; gap:12px }
    .chip{ font-size:12px; color:var(--muted) }

    section{ padding:80px 0 }
    h2{ font-size: clamp(22px, 3.4vw, 32px); margin:0 0 14px; font-weight:800 }
    .lead{ color:var(--muted); margin-bottom:28px }
    .grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:28px }
    .grid-3{ display:grid; grid-template-columns:repeat(3,1fr); gap:20px }
    .card{ background: linear-gradient(180deg,#101737,#0c1330); border:1px solid rgba(255,255,255,.06); border-radius:16px; padding:18px; box-shadow: var(--shadow) }
    .card h3{ margin:0 0 8px; font-size:18px }
    .card p{ margin:0; color:var(--muted) }

    .flow{ display:grid; grid-template-columns: repeat(4,1fr); gap:16px; counter-reset:step }
    .flow .step{ position:relative; padding:16px; border-radius:14px; background:#10173a; border:1px dashed rgba(255,255,255,.08) }
    .flow .step::before{ counter-increment: step; content: counter(step); position:absolute; inset:auto auto 8px 12px; font-weight:800; color:var(--brand); font-size:12px;}

    .table{ width:100%; border-collapse: collapse; font-size:14px; overflow:auto; display:block }
    .table th, .table td{ border:1px solid rgba(255,255,255,.08); padding:10px 12px; text-align:left }
    .table th{ background:#0e1533; position:sticky; top:0 }
    .tag{ display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; font-size:12px; background:rgba(255,255,255,.06); color:var(--muted) }

    .accordion{ border:1px solid rgba(255,255,255,.08); border-radius:14px; overflow:hidden }
    .acc-item + .acc-item{ border-top:1px solid rgba(255,255,255,.08) }
    .acc-head{ display:flex; justify-content:space-between; align-items:center; padding:16px; cursor:pointer; background:#0f1632 }
    .acc-body{ display:none; padding:16px; background:#0b122c; color:var(--muted) }

    .gallery{ display:grid; grid-template-columns:repeat(3,1fr); gap:12px }
    .shot{ aspect-ratio: 16/10; border-radius:12px; background:linear-gradient(135deg,#1a2352,#0c1330); display:grid; place-items:center; color:var(--muted); border:1px solid rgba(255,255,255,.06); cursor:pointer }

    footer{ padding:40px 0; color:#a7b3d9; border-top:1px solid rgba(255,255,255,.06) }

    .em{ color:var(--brand); font-weight:700 }
    .row{ display:flex; align-items:center; gap:10px; flex-wrap:wrap }
    .ghost{ opacity:.8 }
    .right{ text-align:right }
    .mt-8{ margin-top:32px }
    .mt-4{ margin-top:16px }
    .mt-2{ margin-top:8px }

    @media (max-width: 980px){
      .hero{ grid-template-columns: 1fr; }
      .grid-3{ grid-template-columns:1fr }
      .grid-2{ grid-template-columns:1fr }
      .flow{ grid-template-columns:1fr 1fr }
      .gallery{ grid-template-columns:1fr 1fr }
      .nav ul{ display:none }
    }
    @media (max-width: 560px){
      .flow{ grid-template-columns:1fr }
      .gallery{ grid-template-columns:1fr }
    }
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand"><div class="logo"></div>금융 동화</div>
      <nav>
        <ul>
          <li><a href="#problem">문제</a></li>
          <li><a href="#solution">해결책</a></li>
          <li><a href="#features">기능</a></li>
          <li><a href="#data">데이터&AI</a></li>
          <li><a href="#diff">차별성</a></li>
          <li><a href="#impact">효과</a></li>
          <li><a href="#poc">PoC</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <!-- Hero -->
    <section class="hero container" id="top">
      <div>
        <span class="badge">AI 기반 금융 리터러시</span>
        <h1 class="title">어려운 금융을 <span class="em">동화·일러스트·음성</span>으로 쉽게</h1>
        <p class="subtitle">시니어·사회초년생·부모 동행 어린이를 위해 복잡한 금융 개념을
          스토리텔링으로 자동 제작하는 혁신 서비스</p>
        <div class="cta">
          <a class="btn primary" href="#solution">서비스 보기</a>
          <a class="btn ghost" href="#poc">PoC 체험하기</a>
        </div>
        <div class="row mt-4 ghost">
          <span class="tag">RAG</span>
          <span class="tag">파인튜닝 LLM</span>
          <span class="tag">이미지 생성</span>
          <span class="tag">TTS</span>
          <span class="tag">다채널 연동</span>
        </div>
      </div>
      <div class="hero-card">
        <div class="hero-grid">
          <div class="card"><h3>동화 공장</h3><p class="chip">약관·사기사례·법규 → 스토리 자동 변환</p></div>
          <div class="card"><h3>개인화</h3><p class="chip">연령/상품/이력 기반 맞춤 추천</p></div>
          <div class="card"><h3>멀티미디어</h3><p class="chip">텍스트+일러스트+음성 나레이션</p></div>
          <div class="card"><h3>다채널</h3><p class="chip">앱·영업점·콜센터·메신저·ATM</p></div>
        </div>
      </div>
    </section>

    <!-- 문제 & 배경 -->
    <section id="problem">
      <div class="container">
        <h2>문제 & 제안 배경</h2>
        <p class="lead">금융 서비스의 <b>정보 비대칭·복잡성</b>으로 인한 이해 부족과 소외. 특히 시니어·사회초년생에게 심각.</p>
        <div class="grid-2">
          <div class="card">
            <h3>시니어(고령층)</h3>
            <p>복잡한 절차·작은 글씨·빠른 변화로 소외. 금융사기 취약.
            대면/음성 채널(영업점·콜센터)과 동화 콘텐츠 결합으로 신뢰와 이해도 제고.</p>
          </div>
          <div class="card">
            <h3>사회초년생</h3>
            <p>신용·투자 개념 부족. 모바일 친화 동화/웹툰/숏폼·게임 요소로 흥미 유지, 습관 형성 지원.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- 해결책 개요 -->
    <section id="solution">
      <div class="container">
        <h2>해결책: AI 스토리텔링 기반 "금융 동화"</h2>
        <p class="lead">금융 데이터를 <b>동화 시나리오</b>로 재구성하고, <b>일러스트·음성</b>까지 자동 생성하는 동적 콘텐츠 파이프라인.</p>
        <div class="flow mt-4">
          <div class="step"><b>입력 데이터</b><p class="ghost">약관·법규·사기 사례·상품 정보</p></div>
          <div class="step"><b>LLM + RAG</b><p class="ghost">최신·정확한 정보로 스크립트 생성</p></div>
          <div class="step"><b>멀티모달 생성</b><p class="ghost">이미지 생성 + TTS 나레이션</p></div>
          <div class="step"><b>배포</b><p class="ghost">앱·영업점·콜센터·메신저·ATM</p></div>
        </div>
      </div>
    </section>

    <!-- 주요 기능 -->
    <section id="features">
      <div class="container">
        <h2>주요 기능</h2>
        <div class="grid-3 mt-2">
          <div class="card"><h3>AI 동화 자동 제작</h3><p>금융 개념/상품을 쉬운 스토리로 변환. "복리=눈덩이", "채권=신뢰의 약속" 등 비유 중심.</p></div>
          <div class="card"><h3>개인화 추천</h3><p>연령·가입상품·이력 분석으로 적시 동화 추천. 중요 이벤트(만기/금리) 푸시 알림.</p></div>
          <div class="card"><h3>다채널 연동</h3><p>모바일 앱, 영업점 태블릿, 콜센터 화면/TTS, 메신저 카드뉴스, ATM QR 연동.</p></div>
        </div>
      </div>
    </section>

    <!-- 데이터 & AI 적용 -->
    <section id="data">
      <div class="container">
        <h2>활용 데이터 & 생성형 AI 적용</h2>
        <div class="grid-2">
          <div class="card"><h3>콘텐츠 생성 데이터</h3><p>약관·상품 설명·법규·사기 사례·시장 트렌드. RAG로 최신성 확보, 파인튜닝으로 전문성 강화.</p></div>
          <div class="card"><h3>개인화 데이터</h3><p>연령·보유상품·거래 내역·상담 로그. 취향 반영 스토리·설명 대상 추천, 대화형 에이전트로 확장.</p></div>
        </div>
        <div class="accordion mt-8" id="ai-arch">
          <div class="acc-item">
            <div class="acc-head"><b>아키텍처 개요</b><span>+</span></div>
            <div class="acc-body">
              <ul>
                <li>Vector DB에 약관/사기사례/상품비교 문서 색인 → RAG Retrieval</li>
                <li>LLM(파인튜닝)으로 스토리톤·연령대 맞춤 스크립트 생성</li>
                <li>이미지 생성 모델로 일러스트, TTS로 나레이션 파일 생성</li>
                <li>채널 어댑터(앱/영업점/콜센터/메신저/ATM)로 배포</li>
              </ul>
            </div>
          </div>
          <div class="acc-item">
            <div class="acc-head"><b>보안·개인정보</b><span>+</span></div>
            <div class="acc-body">
              <ul>
                <li>PII 최소 수집·가명처리, 전송·저장 암호화</li>
                <li>채널별 접근제어/감사로그, 모델 입력 필터링</li>
                <li>Retrieval 소스 출처 라벨링으로 설명 책임성 확보</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 차별성 -->
    <section id="diff">
      <div class="container">
        <h2>독창성 & 차별성</h2>
        <p class="lead">정적 강의형 교육을 넘어, <b>실시간 생성</b>·<b>개인 맞춤</b>·<b>스토리텔링 몰입</b>.</p>
        <div class="card">
          <div style="overflow:auto">
            <table class="table">
              <thead>
                <tr>
                  <th>구분</th>
                  <th>기존(예: MSOA / Savvy Saving Seniors)</th>
                  <th>금융 동화</th>
                </tr>
              </thead>
              <tbody>
                <tr><td>콘텐츠 형태</td><td>정적 자료·워크숍 키트</td><td>동화·일러스트·TTS 자동 생성</td></tr>
                <tr><td>최신성</td><td>업데이트 주기 길다</td><td>RAG로 최신 사기/트렌드 반영</td></tr>
                <tr><td>개인화</td><td>동일 내용 일괄 제공</td><td>연령/상품/이력 기반 맞춤</td></tr>
                <tr><td>채널</td><td>교육 현장 중심</td><td>앱·영업점·콜센터·메신저·ATM</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <!-- 실현 가능성 -->
    <section id="feasible">
      <div class="container">
        <h2>실현 가능성</h2>
        <div class="grid-3 mt-2">
          <div class="card"><h3>기술</h3><p>클라우드 LLM API 활용으로 빠른 구축. 핵심 난제는 데이터 연동·개인화 로직·보안.</p></div>
          <div class="card"><h3>인프라</h3><p>기존 앱/영업점/콜센터 시스템에 API로 통합. 초기 비용 절감.</p></div>
          <div class="card"><h3>프로토타입</h3><p>스크립트→이미지→TTS 변환 PoC로 가치 검증. 단계적 확장 가능.</p></div>
        </div>
      </div>
    </section>

    <!-- 기대 효과 -->
    <section id="impact">
      <div class="container">
        <h2>기대되는 문제 해결 효과</h2>
        <div class="grid-3 mt-2">
          <div class="card"><h3>사용자</h3><p>어린이·시니어·초년생이 금융 개념을 직관적으로 이해. 습관·사기 예방에 기여.</p></div>
          <div class="card"><h3>금융사</h3><p>불완전판매 위험 감소, 신뢰 기반 장기 관계 형성, 만족도/충성도 향상.</p></div>
          <div class="card"><h3>사회</h3><p>금융 리터러시 저변 확대. 세대 간 격차 해소 및 포용적 금융 생태계 구축.</p></div>
        </div>
      </div>
    </section>

    <!-- 발전 가능성 -->
    <section id="roadmap">
      <div class="container">
        <h2>발전 가능성 & 확장</h2>
        <div class="grid-3 mt-2">
          <div class="card"><h3>개인 맞춤 플랫폼</h3><p>생애주기(초년생/신혼/자녀/은퇴)별 시리즈, 상품 추천 결합.</p></div>
          <div class="card"><h3>양방향 소통</h3><p>퀴즈·시뮬·대화형 에이전트로 학습 검증 및 참여도↑.</p></div>
          <div class="card"><h3>교육·제휴</h3><p>학교/기관 금융교육, 제휴사 상품 스토리 연계로 BM 확장.</p></div>
        </div>
      </div>
    </section>

    <!-- PoC 데모 -->
    <section id="poc">
      <div class="container">
        <h2>PoC 데모 — 동화 자동 생성 & 낭독</h2>
        <p class="lead">주제를 고르면 AI 스토리텔링 흐름을 모사한 <b>동화 스크립트</b>가 생성되고, <b>캔버스 일러스트</b>와 함께 <b>브라우저 TTS</b>로 낭독합니다.</p>

        <div class="card" style="margin-top:12px">
          <div class="row">
            <label class="tag">주제
              <select id="demo-topic" style="margin-left:8px;background:transparent;border:none;color:var(--text)">
                <option value="compound">복리의 마법</option>
                <option value="bond">채권: 신뢰의 약속</option>
                <option value="phishing">보이스피싱 예방</option>
              </select>
            </label>
            <label class="tag">목소리
              <select id="voice" style="margin-left:8px;background:transparent;border:none;color:var(--text)"></select>
            </label>
            <label class="tag">속도 <input id="rate" type="range" min="0.7" max="1.4" step="0.1" value="1"/></label>
            <label class="tag">톤 <input id="pitch" type="range" min="0.6" max="1.6" step="0.1" value="1"/></label>
          </div>
          <div class="row mt-4">
            <button class="btn primary" id="btn-generate">동화 생성</button>
            <button class="btn" id="btn-play">낭독 ▶︎</button>
            <button class="btn ghost" id="btn-stop">정지 ■</button>
            <button class="btn ghost" id="btn-download">이미지 저장</button>
            <span class="ghost" id="tts-hint">(브라우저 낭독: Web Speech API)</span>
          </div>
        </div>

        <div class="grid-2 mt-8">
          <div class="card" style="min-height:260px">
            <h3>동화 스크립트</h3>
            <p id="story" style="white-space:pre-wrap" class="ghost">주제를 고르고 "동화 생성"을 눌러주세요.</p>
            <div id="karaoke" class="mt-2" style="font-size:14px;color:var(--muted)"></div>
          </div>
          <div class="card" style="min-height:260px">
            <h3>자동 일러스트(데모)</h3>
            <canvas id="illustration" width="640" height="360" style="width:100%;height:auto;border-radius:12px;background:linear-gradient(135deg,#1a2352,#0c1330);border:1px solid rgba(255,255,255,.06)"></canvas>
          </div>
        </div>

        <div class="gallery mt-8">
          <div class="shot" data-sample="compound">복리: 눈덩이처럼 불어나는 이야기</div>
          <div class="shot" data-sample="bond">채권: 신뢰의 약속을 지키는 친구들</div>
          <div class="shot" data-sample="phishing">보이스피싱 예방 동화</div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container row" style="justify-content:space-between">
      <div>© <span id="year"></span> 금융 동화</div>
      <div class="row"><a class="tag" href="#top">맨 위로</a></div>
    </div>
  </footer>

  <script>
    // Smooth scroll
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', (e)=>{
        const id = a.getAttribute('href');
        const el = document.querySelector(id);
        if(el){ e.preventDefault(); el.scrollIntoView({behavior:'smooth', block:'start'}); }
      })
    });
    // Active nav
    const sections = ['#problem','#solution','#features','#data','#diff','#impact','#poc'];
    const navLinks = Array.from(document.querySelectorAll('header nav a'));
    const onScroll = () => {
      const y = window.scrollY + 120;
      let current = null;
      sections.forEach(sel=>{
        const el = document.querySelector(sel);
        if (el && el.offsetTop <= y) current = sel;
      });
      navLinks.forEach(a=>a.classList.toggle('active', a.getAttribute('href')===current));
    };
    document.addEventListener('scroll', onScroll, {passive:true}); onScroll();

    // Accordion
    document.querySelectorAll('.acc-head').forEach(head=>{
      head.addEventListener('click', ()=>{
        const body = head.nextElementSibling;
        const open = body.style.display === 'block';
        body.style.display = open ? 'none' : 'block';
        head.querySelector('span').textContent = open ? '+' : '–';
      })
    });

    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // === PoC DEMO LOGIC ===
    (() => {
      const topicEl = document.getElementById('demo-topic');
      const storyEl = document.getElementById('story');
      const karaokeEl = document.getElementById('karaoke');
      const canvas = document.getElementById('illustration');
      const ctx = canvas.getContext('2d');
      const voiceSel = document.getElementById('voice');
      const rateEl = document.getElementById('rate');
      const pitchEl = document.getElementById('pitch');
      const btnGen = document.getElementById('btn-generate');
      const btnPlay = document.getElementById('btn-play');
      const btnStop = document.getElementById('btn-stop');
      const btnDownload = document.getElementById('btn-download');

      const templates = {
        compound: {
          title: '복리의 마법',
          prompt: '작은 눈뭉치가 구르며 큰 눈사람이 되듯, 이자는 쌓여 또 이자를 낳아요.',
          scene: '산길을 구르는 눈덩이',
          story: `어느 겨울 숲속, 작은 눈뭉치 한 알이 있었어요.\n\n토끼는 말했죠. "매일 조금씩 굴리면 더 커질 거야!"\n눈뭉치는 하루하루 구르며 다른 눈을 품었고,\n곧 커다란 눈사람이 되었답니다.\n\n복리란 바로 이런 거예요. 오늘의 이자가 내일의 이자를 또 만들죠.\n시간과 함께 천천히, 그러나 꾸준히 커지는 기적.\n작은 저축도 오래 굴리면 큰 꿈을 세울 수 있어요.`
        },
        bond: {
          title: '채권: 신뢰의 약속',
          prompt: '서로의 신뢰 위에 쌓인 약속의 다리',
          scene: '강 위에 약속의 다리',
          story: `마을과 성을 잇는 다리를 고치려면 돈이 필요했어요.\n사람들은 성에게 돈을 빌려 주고, 성은 약속했죠.\n"정해진 날에, 정해진 이자와 함께 꼭 갚겠습니다."\n\n사람들은 약속을 믿고 다리를 건넜고,\n성은 약속을 지켜 신뢰는 더 단단해졌답니다.\n이것이 채권의 마음이에요 — 시간을 건너는 약속.`
        },
        phishing: {
          title: '보이스피싱 예방',
          prompt: '수상한 전화에는 세 가지 질문!',
          scene: '전화기를 경계하는 여우',
          story: `낯선 전화가 와서 급히 돈을 보내라고 했어요.\n여우는 세 가지를 확인했답니다.\n1) 나는 이 사람을 정말 아나요?\n2) 왜 지금 바로 보내라 하지요?\n3) 공식 번호로 다시 확인했나요?\n\n여우는 끊고 은행 콜센터에 확인했고,\n큰 피해를 막을 수 있었답니다.\n의심이 들면 멈추고, 확인!`
        }
      };

      function roundRect(ctx, x, y, w, h, r){
        ctx.beginPath();
        ctx.moveTo(x+r, y);
        ctx.arcTo(x+w, y, x+w, y+h, r);
        ctx.arcTo(x+w, y+h, x, y+h, r);
        ctx.arcTo(x, y+h, x, y, r);
        ctx.arcTo(x, y, x+w, y, r);
        ctx.closePath();
      }

      function drawScene(key){
        const {title, prompt, scene} = templates[key];
        const w = canvas.width, h = canvas.height;
        const g = ctx.createLinearGradient(0,0,w,h);
        g.addColorStop(0,'#1a2352'); g.addColorStop(1,'#0c1330');
        ctx.fillStyle = g; ctx.fillRect(0,0,w,h);
        for(let i=0;i<10;i++){
          const x=Math.random()*w, y=Math.random()*h, r=8+Math.random()*24;
          ctx.fillStyle = `rgba(110,168,255,${0.08+Math.random()*0.12})`;
          ctx.beginPath(); ctx.arc(x,y,r,0,Math.PI*2); ctx.fill();
        }
        ctx.fillStyle = 'rgba(255,255,255,.08)';
        roundRect(ctx, 16, 16, w-32, 70, 12); ctx.fill();
        ctx.fillStyle = '#eaf0ff';
        ctx.font = 'bold 26px Pretendard, sans-serif'; ctx.fillText(title, 28, 48);
        ctx.font = '14px Pretendard, sans-serif'; ctx.fillStyle = '#a7b3d9'; ctx.fillText(scene + ' · ' + prompt, 28, 70);

        if(key==='compound'){
          ctx.fillStyle = 'rgba(255,255,255,.9)';
          ctx.beginPath(); ctx.arc(w*0.35,h*0.65,40,0,Math.PI*2); ctx.fill();
          ctx.beginPath(); ctx.arc(w*0.55,h*0.65,70,0,Math.PI*2); ctx.fill();
        } else if(key==='bond'){
          ctx.strokeStyle = 'rgba(165,243,252,.8)';
          ctx.lineWidth = 6; ctx.beginPath();
          ctx.moveTo(80,h*0.7); ctx.quadraticCurveTo(w/2,h*0.5,w-80,h*0.7); ctx.stroke();
          ctx.lineWidth = 2; for(let i=0;i<8;i++){ const x=80+i*((w-160)/7); ctx.beginPath(); ctx.moveTo(x,h*0.7); ctx.lineTo(x,h*0.55); ctx.stroke(); }
        } else {
          ctx.strokeStyle = 'rgba(255,255,255,.85)'; ctx.lineWidth=5;
          ctx.strokeRect(w*0.38,h*0.45, w*0.24, h*0.32);
          ctx.fillStyle = 'rgba(239,68,68,.25)'; ctx.fillRect(w*0.38,h*0.70, w*0.24, h*0.07);
        }
        ctx.fillStyle = '#8fa1c7'; ctx.font='12px Pretendard, sans-serif';
        ctx.fillText(' 데모 일러스트 — 실제 서비스에선 생성 모델 사용 ', 20, h-16);
      }

      function generate(key){
        const tpl = templates[key];
        storyEl.textContent = tpl.story;
        karaokeEl.textContent = '';
        drawScene(key);
      }

      // TTS voices
      let voices = [];
      function loadVoices(){
        voices = window.speechSynthesis.getVoices();
        voiceSel.innerHTML = '';
        voices.forEach((v,i)=>{
          const opt=document.createElement('option');
          opt.value = String(i);
          opt.textContent = `${v.name} (${v.lang})`;
          voiceSel.appendChild(opt);
        });
      }
      if('speechSynthesis' in window){
        loadVoices();
        window.speechSynthesis.onvoiceschanged = loadVoices;
      } else {
        document.getElementById('tts-hint').textContent = '브라우저가 TTS를 지원하지 않습니다.';
      }

      function speak(text){
        if(!('speechSynthesis' in window)) return;
        window.speechSynthesis.cancel();
        const utter = new SpeechSynthesisUtterance(text);
        const v = voices[Number(voiceSel.value)] || voices.find(v=>v.lang.startsWith('ko')) || voices[0];
        if(v) utter.voice = v;
        utter.rate = Number(rateEl.value);
        utter.pitch = Number(pitchEl.value);
        const words = text.split(/\s+/);
        let idx=0;
        const timer = setInterval(()=>{
          if(idx>words.length){ clearInterval(timer); return; }
          karaokeEl.innerHTML = words.map((w,i)=> i===idx?`<b style="color:#eaf0ff">${w}</b>`:w).join(' ');
          idx++;
        }, 180/utter.rate);
        utter.onend = ()=>{ clearInterval(timer); };
        window.speechSynthesis.speak(utter);
      }

      // Events
      btnGen.addEventListener('click', ()=> generate(topicEl.value));
      btnPlay.addEventListener('click', ()=> speak(storyEl.textContent || '먼저 동화를 생성해 주세요.'));
      btnStop.addEventListener('click', ()=> window.speechSynthesis && window.speechSynthesis.cancel());
      btnDownload.addEventListener('click', ()=>{
        const a=document.createElement('a');
        a.href = canvas.toDataURL('image/png');
        a.download = 'storybook_demo.png';
        a.click();
      });

      // Gallery quick load
      document.querySelectorAll('[data-sample]').forEach(el=>{
        el.addEventListener('click', ()=>{
          const key = el.getAttribute('data-sample');
          if(key){ topicEl.value = key; generate(key); }
          window.scrollTo({top: canvas.getBoundingClientRect().top + window.scrollY - 120, behavior:'smooth'});
        });
      });
    })();
  </script>
</body>
</html>
